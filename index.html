<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>higher.study Â· Admissions Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;600;700;800;900&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
:root{--bg:#08091a;--card:rgba(255,255,255,.048);--brd:rgba(255,255,255,.08);--hs:#c94e2d;}
body{font-family:'Plus Jakarta Sans',sans-serif;background:var(--bg);color:#fff;min-height:100vh;-webkit-font-smoothing:antialiased;text-rendering:optimizeSpeed;}
body::before{content:'';position:fixed;inset:0;z-index:0;pointer-events:none;
  background:radial-gradient(ellipse 90% 55% at 50% -10%,rgba(99,72,255,.38) 0%,transparent 62%),
             radial-gradient(ellipse 50% 40% at 100% 100%,rgba(6,182,212,.09) 0%,transparent 55%),
             radial-gradient(ellipse 40% 30% at 0% 80%,rgba(139,92,246,.06) 0%,transparent 50%);}
.wrap{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:18px 22px 32px;}
#u1,#u2,#u3,#u4,#u5,#u6{transition:stroke-dasharray .6s cubic-bezier(.16,1,.3,1),stroke-dashoffset .6s cubic-bezier(.16,1,.3,1);will-change:stroke-dasharray,stroke-dashoffset;}
/* LOADER */
#ldr{position:fixed;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;gap:14px;transition:opacity .4s ease;}
#ldr.out{opacity:0;pointer-events:none;}
.ldr-ring{width:56px;height:56px;border:3px solid rgba(201,78,45,.15);border-top-color:#c94e2d;border-radius:50%;animation:spin .75s linear infinite;position:absolute;inset:0;}
@keyframes spin{to{transform:rotate(360deg);}}
.ldr-txt{font-size:11px;font-weight:700;color:rgba(255,255,255,.2);letter-spacing:.18em;}
/* LOGO */
.brand{display:flex;align-items:center;gap:16px;}
.brand-logo-wrap{position:relative;flex-shrink:0;cursor:pointer;}
.brand-logo-glow{position:absolute;inset:-8px;border-radius:30px;background:radial-gradient(ellipse at center,rgba(201,78,45,.65) 0%,rgba(201,78,45,0) 70%);filter:blur(12px);animation:logoGlow 2.5s ease-in-out infinite;z-index:0;}
@keyframes logoGlow{0%,100%{opacity:.55;transform:scale(.95);}50%{opacity:1;transform:scale(1.08);}}
.brand-logo-ring{position:absolute;inset:-4px;border-radius:26px;background:conic-gradient(from 0deg,#c94e2d,#ff7c50,#fbbf24,#ff7c50,#c94e2d);animation:logoSpin 4s linear infinite;z-index:0;opacity:.85;}
@keyframes logoSpin{to{transform:rotate(360deg);}}
.brand-logo-ring-inner{position:absolute;inset:-1px;border-radius:23px;background:var(--bg);z-index:1;}
.brand-logo{width:90px;height:90px;border-radius:20px;object-fit:cover;display:block;position:relative;z-index:2;box-shadow:0 4px 24px rgba(0,0,0,.6);transition:transform .25s cubic-bezier(.16,1,.3,1);}
.brand-logo-wrap:hover .brand-logo{transform:scale(1.07);}
.brand-text{display:flex;flex-direction:column;gap:2px;}
.brand-title{font-size:clamp(18px,2.2vw,28px);font-weight:900;letter-spacing:-.035em;line-height:1.05;background:linear-gradient(135deg,#fff 0%,rgba(255,255,255,.75) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.brand-sub{font-size:11px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;background:linear-gradient(90deg,#c94e2d,#ff7c50);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-top:2px;}
.brand-badge{display:inline-flex;align-items:center;gap:4px;background:rgba(201,78,45,.15);border:1px solid rgba(201,78,45,.3);border-radius:20px;padding:3px 10px;margin-top:5px;width:fit-content;}
.brand-badge-dot{width:5px;height:5px;border-radius:50%;background:#c94e2d;animation:lp 2s infinite;flex-shrink:0;}
.brand-badge-txt{font-size:9px;font-weight:800;color:rgba(201,78,45,.9);letter-spacing:.1em;text-transform:uppercase;}
/* TOPBAR */
.topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;gap:10px;flex-wrap:wrap;}
.top-r{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
.tabs{display:flex;background:rgba(255,255,255,.06);border:1px solid var(--brd);border-radius:12px;padding:3px;gap:2px;}
.tab{padding:6px 14px;border-radius:9px;font-size:12px;font-weight:700;cursor:pointer;color:rgba(255,255,255,.32);border:none;background:transparent;font-family:'Plus Jakarta Sans',sans-serif;transition:all .15s;user-select:none;}
.tab.on{background:rgba(255,255,255,.95);color:#08091a;font-weight:800;}
.tab:hover:not(.on){color:rgba(255,255,255,.7);background:rgba(255,255,255,.07);}
.cal-btn{display:flex;align-items:center;gap:6px;padding:7px 13px;border-radius:10px;border:1px solid var(--brd);background:rgba(255,255,255,.06);cursor:pointer;font-size:12px;font-weight:700;color:rgba(255,255,255,.55);font-family:'Plus Jakarta Sans',sans-serif;transition:all .15s;white-space:nowrap;user-select:none;}
.cal-btn:hover{background:rgba(255,255,255,.1);color:#fff;}
.cal-btn.active{background:rgba(201,78,45,.18);border-color:rgba(201,78,45,.45);color:#f87c5e;}
.ava{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#6366f1,#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:800;font-size:13px;flex-shrink:0;box-shadow:0 0 0 2px rgba(99,102,241,.3);}
/* STATUS */
.statusbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap;gap:8px;}
.live-wrap{display:flex;align-items:center;gap:6px;}
.live-dot{width:7px;height:7px;border-radius:50%;background:#10b981;box-shadow:0 0 6px rgba(16,185,129,.6);animation:lp 2s infinite;}
@keyframes lp{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.75)}}
.live-txt{font-size:11px;font-weight:600;color:rgba(255,255,255,.22);letter-spacing:.03em;}
.kpis{display:flex;gap:8px;flex-wrap:wrap;}
.kpi{display:flex;align-items:center;gap:6px;background:rgba(255,255,255,.055);border:1px solid var(--brd);border-radius:22px;padding:5px 14px;}
.kpi-lbl{font-size:10px;font-weight:700;color:rgba(255,255,255,.3);letter-spacing:.06em;}
.kpi-val{font-size:13px;font-weight:800;}
.kpi.net .kpi-val{color:#67e8f9;}.kpi.can .kpi-val{color:#fca5a5;}.kpi.tot .kpi-val{color:#fff;}
.range-badge{display:none;align-items:center;gap:5px;background:rgba(201,78,45,.12);border:1px solid rgba(201,78,45,.3);border-radius:20px;padding:4px 10px;font-size:11px;font-weight:700;color:#f87c5e;white-space:nowrap;}
.range-badge.show{display:flex;}
.rbx{cursor:pointer;opacity:.6;margin-left:2px;font-size:14px;transition:opacity .15s;}.rbx:hover{opacity:1;}
/* CARDS */
.g2{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:14px;}
@media(max-width:650px){.g2{grid-template-columns:1fr;}}
.card{background:var(--card);border:1px solid var(--brd);border-radius:18px;padding:20px;will-change:transform;transform:translateZ(0);contain:layout style;transition:transform .2s ease,box-shadow .2s ease;}
.card:hover{transform:translateY(-3px) translateZ(0);box-shadow:0 12px 36px rgba(0,0,0,.3);}
.card-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;}
.card-title{font-size:14px;font-weight:800;letter-spacing:-.01em;}
.card-badge{font-size:10px;font-weight:700;color:rgba(255,255,255,.3);background:rgba(255,255,255,.07);border:1px solid var(--brd);border-radius:20px;padding:2px 9px;letter-spacing:.03em;}
.full-card{background:var(--card);border:1px solid var(--brd);border-radius:18px;padding:20px;margin-bottom:14px;will-change:transform;transform:translateZ(0);contain:layout style;transition:transform .2s ease,box-shadow .2s ease;}
.full-card:hover{transform:translateY(-3px) translateZ(0);box-shadow:0 12px 36px rgba(0,0,0,.3);}
/* BARS */
.barlist{display:flex;flex-direction:column;gap:10px;}
.br{display:flex;align-items:center;gap:9px;cursor:pointer;transition:opacity .18s ease;}
.br:hover{opacity:.88;}
.br.active-mgr .bf{box-shadow:0 0 0 2px rgba(255,255,255,.35) inset;}
.br.dimmed{opacity:.25;}
.bn{width:74px;font-size:13px;font-weight:700;flex-shrink:0;color:rgba(255,255,255,.85);}
.bt{flex:1;height:32px;background:rgba(255,255,255,.055);border-radius:8px;overflow:hidden;}
.bf{height:100%;border-radius:8px;display:flex;align-items:center;padding:0 10px;font-size:13px;font-weight:800;color:#fff;width:100%;transform:scaleX(0);transform-origin:left;transition:transform .85s cubic-bezier(.16,1,.3,1);white-space:nowrap;will-change:transform;}
.bv{width:28px;text-align:right;font-size:13px;font-weight:800;color:rgba(255,255,255,.45);flex-shrink:0;}
.c1{background:linear-gradient(90deg,#3730a3,#818cf8);}.c2{background:linear-gradient(90deg,#0e7490,#22d3ee);}
.c3{background:linear-gradient(90deg,#5b21b6,#c084fc);}.c4{background:linear-gradient(90deg,#065f46,#34d399);}.c5{background:linear-gradient(90deg,#9d174d,#f472b6);}
/* DONUT */
.donut-wrap{display:flex;align-items:center;gap:18px;}
.donut-box{position:relative;flex-shrink:0;}
.donut-ctr{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;pointer-events:none;}
.donut-num{font-size:24px;font-weight:900;line-height:1;letter-spacing:-.025em;}
.donut-sub{font-size:8px;font-weight:700;color:rgba(255,255,255,.3);letter-spacing:.14em;margin-top:3px;display:block;}
.leg{flex:1;}.leg-row{display:flex;align-items:center;justify-content:space-between;gap:6px;margin-bottom:8px;}
.leg-row:last-child{margin-bottom:0;}.leg-l{display:flex;align-items:center;gap:7px;}
.leg-dot{width:9px;height:9px;border-radius:3px;flex-shrink:0;}.leg-name{font-size:12px;font-weight:600;color:rgba(255,255,255,.72);}
.leg-val{font-size:13px;font-weight:800;}
.univ-filter-tag{display:none;align-items:center;gap:6px;font-size:10px;font-weight:700;color:rgba(255,255,255,.45);margin-top:10px;}
.univ-filter-tag.show{display:flex;}.univ-filter-name{color:#fff;}
.univ-filter-x{cursor:pointer;opacity:.5;font-size:13px;line-height:1;transition:opacity .15s;margin-left:2px;}.univ-filter-x:hover{opacity:1;}
/* TROPHIES */
.ts-row{display:flex;align-items:center;justify-content:flex-end;gap:4px;margin-top:14px;}
.ts-dot{width:4px;height:4px;border-radius:50%;background:#10b981;display:inline-block;animation:lp 2s infinite;}
.tlist{display:flex;flex-direction:column;gap:10px;}
.ti{display:flex;align-items:center;gap:13px;border-radius:14px;padding:14px 15px;transition:transform .15s;}
.ti:hover{transform:translateX(5px);}
.ti.r1{background:linear-gradient(135deg,rgba(250,204,21,.14),rgba(250,204,21,.03));border:1px solid rgba(250,204,21,.22);}
.ti.r2{background:linear-gradient(135deg,rgba(99,102,241,.14),rgba(99,102,241,.03));border:1px solid rgba(99,102,241,.22);}
.ti.r3{background:linear-gradient(135deg,rgba(236,72,153,.14),rgba(236,72,153,.03));border:1px solid rgba(236,72,153,.22);}
.t-ico{font-size:26px;flex-shrink:0;line-height:1;}
.t-body{flex:1;min-width:0;}.t-role{font-size:9px;font-weight:700;letter-spacing:.18em;text-transform:uppercase;color:rgba(255,255,255,.28);margin-bottom:3px;display:block;}
.t-name{font-size:16px;font-weight:800;display:block;letter-spacing:-.015em;}
.t-right{flex-shrink:0;text-align:right;}.t-num{font-size:26px;font-weight:900;line-height:1;letter-spacing:-.025em;display:block;}
.t-lbl{font-size:8px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.22);display:block;margin-top:3px;}
.ti.r1 .t-num{color:#fde047;}.ti.r2 .t-num{color:#a5b4fc;}.ti.r3 .t-num{color:#f9a8d4;}
.nodata{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;gap:8px;}
.nodata .ico{font-size:28px;opacity:.2;}.nodata p{font-size:11px;font-weight:600;color:rgba(255,255,255,.18);}
/* TREND */
.trend-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px;flex-wrap:wrap;gap:8px;}
.trend-filters{display:flex;gap:5px;}
.tf{padding:5px 12px;border-radius:20px;font-size:11px;font-weight:700;cursor:pointer;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.05);color:rgba(255,255,255,.38);font-family:'Plus Jakarta Sans',sans-serif;transition:all .15s;user-select:none;}
.tf:hover{color:#fff;}.tf.on{background:rgba(99,102,241,.2);border-color:rgba(99,102,241,.5);color:#a5b4fc;}
.trend-stats{display:flex;gap:20px;flex-wrap:wrap;margin-bottom:16px;}
.tstat-val{font-size:22px;font-weight:900;letter-spacing:-.02em;line-height:1;}
.tstat-lbl{font-size:9px;font-weight:700;color:rgba(255,255,255,.28);letter-spacing:.06em;margin-top:2px;}
.tstat.up .tstat-val{color:#34d399;}.tstat.dn .tstat-val{color:#f87171;}.tstat.neu .tstat-val{color:#a5b4fc;}
.chart-wrap{position:relative;height:200px;}
.chart-svg{width:100%;height:100%;overflow:visible;}
.chart-tip{position:absolute;pointer-events:none;opacity:0;transition:opacity .12s;background:rgba(14,15,35,.96);border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:9px 14px;font-size:12px;font-weight:700;white-space:nowrap;box-shadow:0 8px 24px rgba(0,0,0,.5);z-index:10;}
.tt-date{font-size:10px;color:rgba(255,255,255,.35);margin-bottom:3px;font-weight:600;}
.tt-val{font-size:17px;font-weight:900;color:#a5b4fc;}
/* COUNSELLOR */
.counsel-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap;gap:8px;}
.counsel-search{display:flex;align-items:center;gap:6px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.09);border-radius:8px;padding:5px 10px;}
.counsel-search input{background:transparent;border:none;outline:none;color:#fff;font-size:11px;font-weight:600;font-family:'Plus Jakarta Sans',sans-serif;width:120px;}
.counsel-search input::placeholder{color:rgba(255,255,255,.22);}
.c-podium-wrap{display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap;}
.c-pod{display:flex;align-items:center;gap:9px;padding:8px 14px 8px 10px;border-radius:40px;flex:1;min-width:140px;transition:transform .15s ease;}
.c-pod:hover{transform:translateY(-2px);}
.c-pod.p1{background:linear-gradient(90deg,rgba(250,204,21,.14),rgba(250,204,21,.05));border:1px solid rgba(250,204,21,.28);}
.c-pod.p2{background:linear-gradient(90deg,rgba(148,163,184,.1),rgba(148,163,184,.03));border:1px solid rgba(148,163,184,.18);}
.c-pod.p3{background:linear-gradient(90deg,rgba(180,107,60,.1),rgba(180,107,60,.03));border:1px solid rgba(180,107,60,.18);}
.c-pod-ico{font-size:18px;flex-shrink:0;line-height:1;}
.c-pod-body{flex:1;min-width:0;}
.c-pod-name{font-size:12px;font-weight:800;color:#fff;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.3;}
.c-pod-lbl{font-size:9px;font-weight:700;color:rgba(255,255,255,.25);letter-spacing:.08em;text-transform:uppercase;display:block;margin-top:1px;}
.c-pod-num{font-size:20px;font-weight:900;line-height:1;flex-shrink:0;margin-left:4px;}
.p1 .c-pod-num{color:#fde047;}.p2 .c-pod-num{color:#cbd5e1;}.p3 .c-pod-num{color:#c47a3c;}
/* COUNSELLOR RANKED LIST */
.c-scroll{max-height:400px;overflow-y:auto;padding-right:4px;contain:strict;}
.c-scroll::-webkit-scrollbar{width:3px;}.c-scroll::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px;}
.c-row{display:flex;align-items:center;gap:10px;padding:8px 6px;border-bottom:1px solid rgba(255,255,255,.04);border-radius:8px;transition:background .12s;}
.c-row:last-child{border-bottom:none;}.c-row:hover{background:rgba(255,255,255,.04);}
.c-rank{width:22px;font-size:10px;font-weight:800;color:rgba(255,255,255,.18);text-align:center;flex-shrink:0;}
.c-avatar{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:800;flex-shrink:0;color:#fff;}
.c-info{flex:1;min-width:0;}
.c-name{font-size:13px;font-weight:700;color:rgba(255,255,255,.88);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;}
.c-bar-bg{height:4px;background:rgba(255,255,255,.07);border-radius:2px;margin-top:5px;overflow:hidden;}
.c-bar-fill{height:100%;border-radius:2px;transform:scaleX(0);transform-origin:left;transition:transform .9s cubic-bezier(.16,1,.3,1);will-change:transform;}
.c-right{display:flex;flex-direction:column;align-items:flex-end;gap:2px;flex-shrink:0;}
.c-count{font-size:15px;font-weight:900;color:rgba(255,255,255,.7);line-height:1;}
.c-pct{font-size:10px;font-weight:700;color:rgba(255,255,255,.22);}
/* COUNSELLOR FULL NAME GRID */
.cnames-wrap{margin-top:18px;border-top:1px solid rgba(255,255,255,.07);padding-top:16px;}
.cnames-hdr{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;flex-wrap:wrap;gap:8px;}
.cnames-title{font-size:12px;font-weight:800;color:rgba(255,255,255,.35);letter-spacing:.06em;text-transform:uppercase;}
.cnames-toggle{display:flex;align-items:center;gap:5px;font-size:11px;font-weight:700;color:rgba(255,255,255,.3);cursor:pointer;user-select:none;padding:4px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04);transition:all .15s;}
.cnames-toggle:hover{color:#fff;background:rgba(255,255,255,.08);}
.cnames-toggle svg{transition:transform .2s ease;}
.cnames-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(185px,1fr));gap:7px;}
.cn-chip{display:flex;align-items:center;gap:9px;padding:9px 12px;border-radius:11px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);transition:background .15s,transform .15s,border-color .15s;cursor:default;}
.cn-chip:hover{background:rgba(255,255,255,.09);border-color:rgba(255,255,255,.14);transform:translateY(-1px);}
.cn-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
.cn-name{font-size:12px;font-weight:700;color:rgba(255,255,255,.82);flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.cn-stats{display:flex;flex-direction:column;align-items:flex-end;flex-shrink:0;gap:1px;}
.cn-count{font-size:13px;font-weight:900;color:rgba(255,255,255,.6);line-height:1;}
.cn-pct{font-size:9px;font-weight:700;color:rgba(255,255,255,.22);}
/* CAL PANEL */
.cal-overlay{position:fixed;inset:0;z-index:998;background:rgba(0,0,0,.5);opacity:0;pointer-events:none;transition:opacity .25s;}
.cal-overlay.open{opacity:1;pointer-events:all;}
.cal-panel{position:fixed;top:0;right:0;bottom:0;width:340px;background:#111228;border-left:1px solid rgba(255,255,255,.1);z-index:999;transform:translateX(100%);transition:transform .3s cubic-bezier(.16,1,.3,1);display:flex;flex-direction:column;box-shadow:-20px 0 60px rgba(0,0,0,.6);}
.cal-panel.open{transform:translateX(0);}
.cal-hdr{padding:18px 20px;border-bottom:1px solid rgba(255,255,255,.07);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;}
.cal-hdr-title{font-size:15px;font-weight:800;display:flex;align-items:center;gap:8px;}
.cal-x{width:30px;height:30px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.05);cursor:pointer;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.45);font-size:15px;transition:all .15s;}
.cal-x:hover{background:rgba(255,255,255,.12);color:#fff;}
.cal-body{flex:1;overflow-y:auto;padding:16px 20px;}
.cal-body::-webkit-scrollbar{width:3px;}.cal-body::-webkit-scrollbar-thumb{background:rgba(255,255,255,.1);border-radius:3px;}
.rd-wrap{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:13px 15px;margin-bottom:18px;}
.rd-lbl{font-size:9px;font-weight:800;color:rgba(255,255,255,.22);letter-spacing:.14em;text-transform:uppercase;margin-bottom:8px;}
.rd-dates{display:flex;align-items:center;gap:8px;}
.rd-box{flex:1;background:rgba(255,255,255,.06);border-radius:9px;padding:8px 10px;text-align:center;}
.rd-box-lbl{font-size:9px;color:rgba(255,255,255,.28);font-weight:700;display:block;margin-bottom:3px;}
.rd-box-val{font-size:13px;font-weight:800;display:block;}
.rd-sep{font-size:18px;color:rgba(255,255,255,.18);}
.sec-lbl{font-size:9px;font-weight:800;color:rgba(255,255,255,.22);letter-spacing:.14em;text-transform:uppercase;margin-bottom:9px;}
.presets{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:20px;}
.preset{padding:9px 8px;border-radius:9px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.04);cursor:pointer;font-size:12px;font-weight:700;color:rgba(255,255,255,.5);text-align:center;transition:all .15s;font-family:'Plus Jakarta Sans',sans-serif;}
.preset:hover{background:rgba(255,255,255,.09);color:#fff;}
.preset.sel{background:rgba(201,78,45,.15);border-color:rgba(201,78,45,.38);color:#f87c5e;}
.cal-nav{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
.cal-nav-btn{width:30px;height:30px;border-radius:8px;border:1px solid rgba(255,255,255,.09);background:rgba(255,255,255,.05);cursor:pointer;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,.45);font-size:16px;transition:all .15s;user-select:none;}
.cal-nav-btn:hover{background:rgba(255,255,255,.12);color:#fff;}
.cal-month{font-size:14px;font-weight:800;}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:3px;margin-bottom:4px;}
.cal-dow{font-size:10px;font-weight:700;color:rgba(255,255,255,.22);text-align:center;padding:5px 0;letter-spacing:.04em;}
.cal-day{aspect-ratio:1;border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;cursor:pointer;color:rgba(255,255,255,.6);transition:background .1s,color .1s;border:1px solid transparent;}
.cal-day:hover:not(.empty){background:rgba(255,255,255,.1);color:#fff;}
.cal-day.empty{pointer-events:none;}
.cal-day.today{border-color:rgba(99,102,241,.5);color:#a5b4fc;background:rgba(99,102,241,.08);}
.cal-day.in-range{background:rgba(201,78,45,.13);color:rgba(255,255,255,.82);border-radius:0;}
.cal-day.range-start{background:var(--hs)!important;color:#fff!important;border-color:var(--hs)!important;border-radius:7px 2px 2px 7px;}
.cal-day.range-end{background:var(--hs)!important;color:#fff!important;border-color:var(--hs)!important;border-radius:2px 7px 7px 2px;}
.cal-day.range-start.range-end{border-radius:7px!important;}
.cal-footer{padding:14px 20px;border-top:1px solid rgba(255,255,255,.07);display:flex;flex-direction:column;gap:8px;flex-shrink:0;}
.btn-apply{padding:12px;border-radius:11px;background:var(--hs);border:none;color:#fff;font-size:13px;font-weight:800;cursor:pointer;font-family:'Plus Jakarta Sans',sans-serif;transition:all .15s;}
.btn-apply:hover{background:#b8431f;transform:translateY(-1px);}
.btn-apply:disabled{opacity:.35;pointer-events:none;transform:none;}
.btn-clear{padding:10px;border-radius:11px;background:transparent;border:1px solid rgba(255,255,255,.09);color:rgba(255,255,255,.38);font-size:12px;font-weight:700;cursor:pointer;font-family:'Plus Jakarta Sans',sans-serif;transition:all .15s;}
.btn-clear:hover{border-color:rgba(255,255,255,.2);color:rgba(255,255,255,.7);}
.retry-btn{padding:8px 20px;border-radius:10px;background:rgba(201,78,45,.2);border:1px solid rgba(201,78,45,.4);color:#f87c5e;font-size:12px;font-weight:700;cursor:pointer;font-family:'Plus Jakarta Sans',sans-serif;transition:all .15s;margin-left:8px;}
.retry-btn:hover{background:rgba(201,78,45,.35);}
@keyframes fadeUp{from{opacity:0;transform:translateY(12px);}to{opacity:1;transform:none;}}
.f1{animation:fadeUp .3s ease both;}.f2{animation:fadeUp .3s ease both .07s;}.f3{animation:fadeUp .3s ease both .14s;}.f4{animation:fadeUp .3s ease both .21s;}
</style>
</head>
<body>
<div id="ldr">
  <div style="position:relative;width:56px;height:56px;display:flex;align-items:center;justify-content:center;">
    <div class="ldr-ring"></div>
    <img src="data:image/png;base64,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" alt="" style="width:36px;height:36px;border-radius:9px;position:relative;z-index:1;object-fit:cover;">
  </div>
  <div class="ldr-txt">LOADING LIVE DATA</div>
</div>
<div class="cal-overlay" id="calOverlay"></div>
<div class="cal-panel" id="calPanel">
  <div class="cal-hdr">
    <div class="cal-hdr-title"><svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>Custom Date Range</div>
    <div class="cal-x" id="calClose">&#10005;</div>
  </div>
  <div class="cal-body">
    <div class="rd-wrap">
      <div class="rd-lbl">Selected Range</div>
      <div class="rd-dates">
        <div class="rd-box"><span class="rd-box-lbl">FROM</span><span class="rd-box-val" id="rdFrom">&#8212;</span></div>
        <div class="rd-sep">&#8594;</div>
        <div class="rd-box"><span class="rd-box-lbl">TO</span><span class="rd-box-val" id="rdTo">&#8212;</span></div>
      </div>
    </div>
    <div class="sec-lbl">Quick Presets</div>
    <div class="presets">
      <div class="preset" data-preset="today">Today</div>
      <div class="preset" data-preset="yesterday">Yesterday</div>
      <div class="preset" data-preset="last7">Last 7 Days</div>
      <div class="preset" data-preset="last30">Last 30 Days</div>
      <div class="preset" data-preset="thismonth">This Month</div>
      <div class="preset" data-preset="lastmonth">Last Month</div>
      <div class="preset" data-preset="thisyear">This Year</div>
      <div class="preset" data-preset="alltime">All Time</div>
    </div>
    <div class="sec-lbl">Pick Dates</div>
    <div class="cal-nav">
      <div class="cal-nav-btn" id="prevMo">&#8249;</div>
      <div class="cal-month" id="calMonthLbl"></div>
      <div class="cal-nav-btn" id="nextMo">&#8250;</div>
    </div>
    <div class="cal-grid" id="calDow"></div>
    <div class="cal-grid" id="calDays"></div>
  </div>
  <div class="cal-footer">
    <button class="btn-apply" id="btnApply" disabled>Apply Range</button>
    <button class="btn-clear" id="btnClear">Clear Selection</button>
  </div>
</div>

<div class="wrap" id="dash" style="display:none">
  <div class="topbar f1">
    <div class="brand">
      <div class="brand-logo-wrap">
        <div class="brand-logo-glow"></div>
        <div class="brand-logo-ring"><div class="brand-logo-ring-inner"></div></div>
        <img class="brand-logo" src="data:image/png;base64,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" alt="higher.study">
      </div>
      <div class="brand-text">
        <div class="brand-title">Admissions Dashboard</div>
        <div class="brand-sub">Higher.Study &middot; 2026</div>
        <div class="brand-badge"><div class="brand-badge-dot"></div><span class="brand-badge-txt">Real-Time Live</span></div>
      </div>
    </div>
    <div class="top-r">
      <div class="tabs">
        <button class="tab on" data-p="all">All Time</button>
        <button class="tab" data-p="today">Today</button>
        <button class="tab" data-p="weekly">Week</button>
        <button class="tab" data-p="monthly">Month</button>
      </div>
      <button class="cal-btn" id="calBtn"><svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg>Custom Range</button>
      <div class="ava">V</div>
    </div>
  </div>

  <div class="statusbar f1">
    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
      <div class="live-wrap"><div class="live-dot"></div><span class="live-txt" id="stxt">Connecting...</span></div>
      <div class="range-badge" id="rangeBadge"><svg width="11" height="11" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg><span id="rangeBadgeTxt"></span><span class="rbx" id="rangeBadgeX">&#10005;</span></div>
    </div>
    <div class="kpis">
      <div class="kpi net"><span class="kpi-lbl">NET ADM</span><span class="kpi-val" id="pnet">&#8212;</span></div>
      <div class="kpi tot"><span class="kpi-lbl">TOTAL</span><span class="kpi-val" id="ptot">&#8212;</span></div>
      <div class="kpi can"><span class="kpi-lbl">CANCEL</span><span class="kpi-val" id="pcan">&#8212;</span></div>
    </div>
  </div>

  <div class="g2 f2">
    <div class="card">
      <div class="card-head"><span class="card-title">Manager Performance</span><span class="card-badge" id="mb-b">&#8212;</span></div>
      <div class="barlist" id="mb"></div>
      <div class="ts-row"><span class="ts-dot"></span>&nbsp;<span id="t1" style="font-size:10px;font-weight:600;color:rgba(255,255,255,.16)">&#8212;</span></div>
    </div>
    <div class="card">
      <div class="card-head"><span class="card-title">University Split</span><span class="card-badge" id="ub-b">&#8212;</span></div>
      <div class="donut-wrap">
        <div class="donut-box">
          <svg width="140" height="140" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="38" fill="none" stroke="rgba(255,255,255,.05)" stroke-width="13"/>
            <circle id="u1" cx="50" cy="50" r="38" fill="none" stroke-width="13" stroke-dasharray="0 238.8" transform="rotate(-90 50 50)"/>
            <circle id="u2" cx="50" cy="50" r="38" fill="none" stroke-width="13" stroke-dasharray="0 238.8" transform="rotate(-90 50 50)"/>
            <circle id="u3" cx="50" cy="50" r="38" fill="none" stroke-width="13" stroke-dasharray="0 238.8" transform="rotate(-90 50 50)"/>
            <circle id="u4" cx="50" cy="50" r="38" fill="none" stroke-width="13" stroke-dasharray="0 238.8" transform="rotate(-90 50 50)"/>
            <circle id="u5" cx="50" cy="50" r="38" fill="none" stroke-width="13" stroke-dasharray="0 238.8" transform="rotate(-90 50 50)"/>
            <circle id="u6" cx="50" cy="50" r="38" fill="none" stroke-width="13" stroke-dasharray="0 238.8" transform="rotate(-90 50 50)"/>
          </svg>
          <div class="donut-ctr"><div class="donut-num" id="unum">&#8212;</div><span class="donut-sub" id="uSub">NET ADM</span></div>
        </div>
        <div class="leg" id="uleg"></div>
      </div>
      <div class="univ-filter-tag" id="univFilterTag">Showing: <span class="univ-filter-name" id="univFilterName"></span><span class="univ-filter-x" id="univFilterX">&#10005;</span></div>
      <div class="ts-row"><span class="ts-dot"></span>&nbsp;<span id="t2" style="font-size:10px;font-weight:600;color:rgba(255,255,255,.16)">&#8212;</span></div>
    </div>
  </div>

  <div class="g2 f3">
    <div class="card">
      <div class="card-head"><span class="card-title">Team Leader Performance</span><span class="card-badge" id="tb-b">&#8212;</span></div>
      <div class="barlist" id="tb"></div>
      <div class="ts-row"><span class="ts-dot"></span>&nbsp;<span id="t3" style="font-size:10px;font-weight:600;color:rgba(255,255,255,.16)">&#8212;</span></div>
    </div>
    <div class="card">
      <div class="card-head"><span class="card-title">Top Performers</span><span class="card-badge">RANKINGS</span></div>
      <div class="tlist" id="tlist"></div>
    </div>
  </div>

  <div class="full-card f4">
    <div class="trend-head">
      <div class="card-title">&#128200; Admission Trend Analysis</div>
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
        <div class="trend-filters">
          <div class="tf on" data-tf="daily">Daily</div>
          <div class="tf" data-tf="weekly">Weekly</div>
          <div class="tf" data-tf="monthly">Monthly</div>
        </div>
        <div class="ts-row" style="margin:0"><span class="ts-dot"></span>&nbsp;<span id="t4" style="font-size:10px;font-weight:600;color:rgba(255,255,255,.16)">&#8212;</span></div>
      </div>
    </div>
    <div class="trend-stats" id="trendStats"></div>
    <div class="chart-wrap" id="chartWrap">
      <svg class="chart-svg" id="chartSvg"></svg>
      <div class="chart-tip" id="chartTip"><div class="tt-date" id="ttDate"></div><span style="color:#818cf8;margin-right:4px;">&#9679;</span><span class="tt-val" id="ttVal"></span></div>
    </div>
  </div>

  <div class="full-card f4">
    <div class="counsel-head">
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
        <div class="card-title">&#129489;&#8205;&#128188; Counsellor Performance</div>
        <span class="card-badge" id="cBadge">&#8212;</span>
      </div>
      <div class="counsel-search"><svg width="12" height="12" fill="none" stroke="rgba(255,255,255,.3)" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg><input type="text" id="cSearch" placeholder="Search counsellor..."></div>
    </div>
    <div class="c-podium-wrap" id="cPodium"></div>
    <div class="c-scroll" id="cList"></div>
    <div class="cnames-wrap" id="cnamesWrap" style="display:none">
      <div class="cnames-hdr">
        <span class="cnames-title" id="cnamesTitle">All Counsellors</span>
        <div class="cnames-toggle" id="cnamesToggle">
          <svg width="11" height="11" fill="none" stroke="currentColor" stroke-width="2.2" viewBox="0 0 24 24"><path d="M18 15l-6-6-6 6"/></svg>
          <span id="cnamesToggleTxt">Hide List</span>
        </div>
      </div>
      <div class="cnames-grid" id="cnamesGrid"></div>
    </div>
    <div class="ts-row"><span class="ts-dot"></span>&nbsp;<span id="t5" style="font-size:10px;font-weight:600;color:rgba(255,255,255,.16)">&#8212;</span></div>
  </div>
</div>

<script>
'use strict';
const API='https://script.google.com/macros/s/AKfycbzfShckKgMh5S5PYlXpj5AGchUYjzJIvYdTQ2sxM2JUYQP9Tvm66nxYkumcpaUxNgG5/exec';
const C=238.8,DISK_TTL=5*60*1000,MEM_TTL=5*60*1000,RTRY=20*1000;
const MGRS=[{n:'Deepesh',k:'deepesh',c:'c1'},{n:'Aslam',k:'aslam',c:'c2'},{n:'Aasif',k:'aasif',c:'c3'},{n:'Manas',k:'manas',c:'c4'}];
const UNIVS=[{n:'Alliance',k:'alliance',cl:'#22d3ee'},{n:'Amity',k:'amity',cl:'#818cf8'},{n:'Chandigarh',k:'chandigarh',cl:'#34d399'},{n:'Presidency',k:'presidency',cl:'#fbbf24'},{n:'CV Raman',k:'cvRaman',cl:'#f472b6'},{n:'Others',k:'others',cl:'#475569'}];
const TLS=[{n:'Akshay',k:'tlAkshay',c:'c1'},{n:'Kajal',k:'tlKajal',c:'c5'},{n:'Devashis',k:'tlDevashis',c:'c2'},{n:'Antaryami',k:'tlAntaryami',c:'c3'},{n:'Manas',k:'tlManas',c:'c4'}];
const MONTHS=['January','February','March','April','May','June','July','August','September','October','November','December'];
const DOWS=['Su','Mo','Tu','We','Th','Fr','Sa'];
const CCOLORS=['linear-gradient(135deg,#6366f1,#818cf8)','linear-gradient(135deg,#0e7490,#22d3ee)','linear-gradient(135deg,#5b21b6,#c084fc)','linear-gradient(135deg,#065f46,#34d399)','linear-gradient(135deg,#9d174d,#f472b6)','linear-gradient(135deg,#92400e,#f59e0b)','linear-gradient(135deg,#1e3a5f,#3b82f6)','linear-gradient(135deg,#4c1d95,#a78bfa)','linear-gradient(135deg,#064e3b,#6ee7b7)','linear-gradient(135deg,#7f1d1d,#fca5a5)'];
const CDOTS=['#6366f1','#0e7490','#5b21b6','#065f46','#9d174d','#92400e','#1e3a5f','#4c1d95','#064e3b','#7f1d1d','#0f766e','#b45309','#6d28d9','#0369a1','#be185d'];
const $=id=>document.getElementById(id);
const mem={};
let period='all',refreshTimer=null,shown=false,customFrom=null,customTo=null;
let allCounselData=[],cSearchVal='',trendFilter='daily',activeMgr=null,lastTrendRows=[],cnamesVisible=true;

function dkRead(k){try{const s=localStorage.getItem('hs3_'+k);if(!s)return null;const o=JSON.parse(s);if(Date.now()-o.ts>DISK_TTL){localStorage.removeItem('hs3_'+k);return null;}return o;}catch{return null;}}
function dkWrite(k,data){try{localStorage.setItem('hs3_'+k,JSON.stringify({data,ts:Date.now()}));}catch{}}

function norm(d){
  if(!d||d.error)return null;
  const kn=(d.alliance||0)+(d.amity||0)+(d.chandigarh||0)+(d.presidency||0)+(d.cvRaman||0)+(d.gift||0)+(d.centurion||0)+(d.driems||0);
  d.others=Math.max(0,(d.netAdm||0)-kn);
  if(!Array.isArray(d.trendRows))d.trendRows=[];
  return d;
}

async function fetchOne(p,from,to){
  let url=API+'?sheet='+p;
  if(from&&to)url+='&from='+from+'&to='+to;
  const r=await fetch(url,{cache:'no-store'});
  if(!r.ok)throw new Error('HTTP '+r.status);
  return norm(await r.json());
}

async function load(p,force=false,from=null,to=null){
  period=p;clearTimeout(refreshTimer);
  const ck=from?'cr_'+from+'_'+to:p;
  if(!force&&mem[ck]&&(Date.now()-mem[ck].ts)<MEM_TTL){render(mem[ck].data,true);schedRefresh(ck,p,from,to);return;}
  const dk=dkRead(ck);
  if(dk){render(dk.data,true);show();fetchOne(p,from,to).then(d=>{if(!d)return;mem[ck]={data:d,ts:Date.now()};dkWrite(ck,d);if(period===p||ck.startsWith('cr_'))render(d,false);schedRefresh(ck,p,from,to);}).catch(()=>schedRefresh(ck,p,from,to));return;}
  st('&#9889; Fetching...');
  try{
    const d=await fetchOne(p,from,to);
    if(!d){st('&#9888; No data &mdash; <button class="retry-btn" onclick="load(period,true,customFrom,customTo)">Retry</button>');show();return;}
    mem[ck]={data:d,ts:Date.now()};dkWrite(ck,d);render(d,false);schedRefresh(ck,p,from,to);
  }catch(e){
    st('&#9888; Failed &mdash; <button class="retry-btn" onclick="load(period,true,customFrom,customTo)">Retry</button>');
    clearTimeout(refreshTimer);refreshTimer=setTimeout(()=>load(period,true),RTRY);show();
  }
}

function schedRefresh(ck,p,from,to){
  clearTimeout(refreshTimer);
  refreshTimer=setTimeout(()=>{fetchOne(p,from,to).then(d=>{if(!d)return;mem[ck]={data:d,ts:Date.now()};dkWrite(ck,d);if(period===p||ck.startsWith('cr_'))render(d,false);schedRefresh(ck,p,from,to);}).catch(()=>{});},MEM_TTL);
}

function prefetchAll(){
  ['all','today','weekly','monthly'].forEach((p,i)=>{
    if(mem[p])return;
    const dk=dkRead(p);if(dk){mem[p]={data:dk.data,ts:dk.ts};return;}
    setTimeout(()=>{fetchOne(p,null,null).then(d=>{if(!d)return;mem[p]={data:d,ts:Date.now()};dkWrite(p,d);if(period===p)render(d,false);}).catch(()=>{});},i*700);
  });
}

function render(d,stale){
  const net=d.netAdm||0,tot=d.totalAdm||0,can=d.cancelAdm||0;
  const mm=Math.max(...MGRS.map(m=>d[m.k]||0),1);
  const tm=Math.max(...TLS.map(t=>d[t.k]||0),1);
  $('pnet').textContent=net;$('ptot').textContent=tot;$('pcan').textContent=can;
  $('mb-b').textContent=net+' ADM';$('tb-b').textContent=net+' ADM';
  $('ub-b').textContent=UNIVS.filter(u=>(d[u.k]||0)>0).length+' UNIVS';

  $('mb').innerHTML=net===0?nd('No admissions'):MGRS.map((m,i)=>{
    const v=d[m.k]||0;
    return'<div class="br" id="mbr'+i+'" title="Click to filter by '+m.n+'"><div class="bn">'+m.n+'</div><div class="bt"><div class="bf '+m.c+'" id="mb'+i+'">'+v+'</div></div><div class="bv">'+v+'</div></div>';
  }).join('');
  MGRS.forEach((m,i)=>{const row=$('mbr'+i);if(row)row.addEventListener('click',()=>toggleMgrFilter(m.k,m.n,d.trendRows||[]));});

  lastTrendRows=d.trendRows||[];
  updateDonut(d,lastTrendRows);

  $('tb').innerHTML=net===0?nd('No admissions'):TLS.map((t,i)=>{
    const v=d[t.k]||0;
    return'<div class="br"><div class="bn">'+t.n+'</div><div class="bt"><div class="bf '+t.c+'" id="tb'+i+'">'+v+'</div></div><div class="bv">'+v+'</div></div>';
  }).join('');

  const topM=[...MGRS].sort((a,b)=>(d[b.k]||0)-(d[a.k]||0));
  const topT=[...TLS].sort((a,b)=>(d[b.k]||0)-(d[a.k]||0));
  $('tlist').innerHTML=net===0?nd('No data'):[
    tr('ð','Manager',topM[0].n,d[topM[0].k]||0,'r1'),
    tr('ð¥','Team Leader',topT[0].n,d[topT[0].k]||0,'r2'),
    topT[1]?tr('ð¥','Team Leader',topT[1].n,d[topT[1].k]||0,'r3'):''
  ].join('');

  requestAnimationFrame(()=>requestAnimationFrame(()=>{
    MGRS.forEach((m,i)=>{const e=$('mb'+i);if(e)e.style.transform='scaleX('+((d[m.k]||0)/mm)+')';});
    TLS.forEach((t,i)=>{const e=$('tb'+i);if(e)e.style.transform='scaleX('+((d[t.k]||0)/tm)+')';});
  }));

  const ts=new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});
  ['t1','t2','t3'].forEach(id=>{const e=$(id);if(e)e.textContent=(stale?'â¡ Cached Â· ':'â Live Â· ')+ts;});
  st(stale?'â¡ Instant Â· refreshing in background':'â Live Â· refreshes in 5 min');

  drawTrend(d.trendRows||[]);
  drawCounsel(d.trendRows||[]);
  activeMgr=null;syncMgrBarStates();$('univFilterTag').classList.remove('show');
  show();
}

function tr(i,r,n,c,cl){return'<div class="ti '+cl+'"><span class="t-ico">'+i+'</span><div class="t-body"><span class="t-role">'+r+'</span><span class="t-name">'+n+'</span></div><div class="t-right"><span class="t-num">'+c+'</span><span class="t-lbl">Admissions</span></div></div>';}
function nd(m){return'<div class="nodata"><div class="ico">&#128235;</div><p>'+m+'</p></div>';}
function st(t){const e=$('stxt');if(e)e.innerHTML=t;}
function show(){if(shown)return;shown=true;const l=$('ldr');l.classList.add('out');setTimeout(()=>l.style.display='none',400);$('dash').style.display='block';}

/* TREND */
document.querySelectorAll('.tf').forEach(b=>b.addEventListener('click',()=>{
  document.querySelectorAll('.tf').forEach(x=>x.classList.remove('on'));
  b.classList.add('on');trendFilter=b.dataset.tf;
  const ck=customFrom?'cr_'+customFrom+'_'+customTo:period;
  const d=mem[ck];if(d)drawTrend(d.data.trendRows||[]);
}));

function groupRows(rows,mode){
  const map={};
  rows.forEach(r=>{
    const dt=new Date(r.date);if(isNaN(dt))return;
    let key;
    if(mode==='daily')key=r.date;
    else if(mode==='weekly'){const d2=new Date(dt);d2.setHours(0,0,0,0);const day=d2.getDay()||7;d2.setDate(d2.getDate()-day+1);key=d2.getFullYear()+'-'+String(d2.getMonth()+1).padStart(2,'0')+'-'+String(d2.getDate()).padStart(2,'0');}
    else key=dt.getFullYear()+'-'+String(dt.getMonth()+1).padStart(2,'0');
    map[key]=(map[key]||0)+1;
  });
  return Object.entries(map).sort((a,b)=>a[0]<b[0]?-1:1);
}
function fmtKey(k,mode){
  const p=k.split('-'),mn=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  if(mode==='monthly')return mn[+p[1]-1]+' '+p[0];
  if(mode==='weekly')return'W/'+p[2]+' '+mn[+p[1]-1];
  return p[2]+' '+mn[+p[1]-1];
}

function drawTrend(rows){
  const wrap=$('chartWrap'),svg=$('chartSvg'),tip=$('chartTip'),statsEl=$('trendStats');
  if(!rows.length){svg.innerHTML='';statsEl.innerHTML='';return;}
  const pts=groupRows(rows,trendFilter);if(!pts.length){svg.innerHTML='';statsEl.innerHTML='';return;}
  const vals=pts.map(p=>p[1]),total=vals.reduce((a,b)=>a+b,0),avg=total/vals.length,peak=Math.max(...vals);
  const peakKey=pts[vals.indexOf(peak)][0],trend=vals.length>1?vals[vals.length-1]-vals[0]:0;
  const trendPct=vals[0]>0?Math.round((trend/vals[0])*100):0;
  const unit=trendFilter==='monthly'?'MONTH':trendFilter==='weekly'?'WEEK':'DAY';
  statsEl.innerHTML='<div class="tstat neu"><div class="tstat-val">'+total+'</div><div class="tstat-lbl">TOTAL</div></div><div class="tstat neu"><div class="tstat-val">'+avg.toFixed(1)+'</div><div class="tstat-lbl">AVG/'+unit+'</div></div><div class="tstat neu"><div class="tstat-val">'+peak+'</div><div class="tstat-lbl">PEAK &middot; '+fmtKey(peakKey,trendFilter)+'</div></div><div class="tstat '+( trendPct>=0?'up':'dn')+'"><div class="tstat-val">'+( trendPct>=0?'+':'')+trendPct+'%</div><div class="tstat-lbl">TREND</div></div>';
  const W=wrap.offsetWidth||900,H=200,pL=38,pR=16,pT=20,pB=36,cW=W-pL-pR,cH=H-pT-pB,maxV=Math.max(...vals,1),n=pts.length;
  svg.setAttribute('viewBox','0 0 '+W+' '+H);svg.innerHTML='';
  const def=document.createElementNS('http://www.w3.org/2000/svg','defs');
  def.innerHTML='<linearGradient id="tg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#818cf8" stop-opacity="0.3"/><stop offset="100%" stop-color="#818cf8" stop-opacity="0.01"/></linearGradient><linearGradient id="lg" x1="0" y1="0" x2="1" y2="0"><stop offset="0%" stop-color="#6366f1"/><stop offset="60%" stop-color="#818cf8"/><stop offset="100%" stop-color="#22d3ee"/></linearGradient><filter id="glow"><feGaussianBlur stdDeviation="2.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>';
  svg.appendChild(def);
  const xOf=i=>pL+(n===1?cW/2:i*(cW/(n-1))),yOf=v=>pT+cH-(v/maxV)*cH;
  [0,.25,.5,.75,1].forEach(t=>{
    const y=pT+cH-(t*cH);
    const gl=document.createElementNS('http://www.w3.org/2000/svg','line');gl.setAttribute('x1',pL);gl.setAttribute('x2',W-pR);gl.setAttribute('y1',y);gl.setAttribute('y2',y);gl.setAttribute('stroke','rgba(255,255,255,.05)');gl.setAttribute('stroke-width','1');svg.appendChild(gl);
    const lbl=document.createElementNS('http://www.w3.org/2000/svg','text');lbl.setAttribute('x',pL-6);lbl.setAttribute('y',y+4);lbl.setAttribute('fill','rgba(255,255,255,.2)');lbl.setAttribute('font-size','9');lbl.setAttribute('text-anchor','end');lbl.setAttribute('font-family','Plus Jakarta Sans');lbl.textContent=Math.round(t*maxV);svg.appendChild(lbl);
  });
  if(n>1){
    let area='M '+xOf(0)+' '+(H-pB);pts.forEach((_,i)=>area+=' L '+xOf(i)+' '+yOf(pts[i][1]));area+=' L '+xOf(n-1)+' '+(H-pB)+' Z';
    const ap=document.createElementNS('http://www.w3.org/2000/svg','path');ap.setAttribute('d',area);ap.setAttribute('fill','url(#tg)');svg.appendChild(ap);
    let ld='M '+xOf(0)+' '+yOf(pts[0][1]);
    for(let i=1;i<n;i++){const x0=xOf(i-1),y0=yOf(pts[i-1][1]),x1=xOf(i),y1=yOf(pts[i][1]),cpx=(x0+x1)/2;ld+=' C '+cpx+' '+y0+' '+cpx+' '+y1+' '+x1+' '+y1;}
    const lp=document.createElementNS('http://www.w3.org/2000/svg','path');lp.setAttribute('d',ld);lp.setAttribute('fill','none');lp.setAttribute('stroke','url(#lg)');lp.setAttribute('stroke-width','2.5');lp.setAttribute('stroke-linecap','round');
    const len=2000;lp.style.strokeDasharray=len;lp.style.strokeDashoffset=len;lp.style.transition='stroke-dashoffset 1.1s cubic-bezier(.16,1,.3,1)';svg.appendChild(lp);
    requestAnimationFrame(()=>requestAnimationFrame(()=>{lp.style.strokeDashoffset=0;}));
  }
  const maxL=Math.min(n,8),step=Math.ceil(n/maxL);
  pts.forEach((p,i)=>{
    if(i%step!==0&&i!==n-1)return;
    const lbl=document.createElementNS('http://www.w3.org/2000/svg','text');lbl.setAttribute('x',xOf(i));lbl.setAttribute('y',H-pB+15);lbl.setAttribute('fill','rgba(255,255,255,.22)');lbl.setAttribute('font-size','9');lbl.setAttribute('text-anchor','middle');lbl.setAttribute('font-family','Plus Jakarta Sans');lbl.textContent=fmtKey(p[0],trendFilter);svg.appendChild(lbl);
  });
  pts.forEach((p,i)=>{
    const x=xOf(i),y=yOf(p[1]);
    const dot=document.createElementNS('http://www.w3.org/2000/svg','circle');dot.setAttribute('cx',x);dot.setAttribute('cy',y);dot.setAttribute('r','4');dot.setAttribute('fill','#818cf8');dot.setAttribute('stroke','#08091a');dot.setAttribute('stroke-width','2');dot.setAttribute('filter','url(#glow)');dot.style.opacity='0';dot.style.transition='opacity .2s '+(i*25)+'ms';svg.appendChild(dot);
    setTimeout(()=>{dot.style.opacity='1';},80+i*25);
    const hw=n>1?Math.max(18,cW/(n-1)/2):cW;
    const hit=document.createElementNS('http://www.w3.org/2000/svg','rect');hit.setAttribute('x',Math.max(pL,x-hw/2));hit.setAttribute('y',pT);hit.setAttribute('width',hw);hit.setAttribute('height',cH);hit.setAttribute('fill','transparent');hit.style.cursor='crosshair';
    hit.addEventListener('mouseenter',()=>{dot.setAttribute('r','6');tip.style.opacity='1';$('ttDate').textContent=fmtKey(p[0],trendFilter);$('ttVal').textContent=p[1]+' admissions';const tipW=tip.offsetWidth||120;let tx=x-tipW/2;if(tx<0)tx=4;if(tx+tipW>W)tx=W-tipW-4;tip.style.left=tx+'px';tip.style.top=(y-52<0?y+12:y-52)+'px';});
    hit.addEventListener('mouseleave',()=>{dot.setAttribute('r','4');tip.style.opacity='0';});
    svg.appendChild(hit);
  });
  const ts=new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});
  const t4=$('t4');if(t4)t4.textContent='Updated '+ts;
}

/* COUNSELLOR */
document.getElementById('cSearch').addEventListener('input',function(){cSearchVal=this.value.toLowerCase().trim();renderCounselList(allCounselData);});

function drawCounsel(rows){
  const podEl=$('cPodium'),listEl=$('cList'),badgeEl=$('cBadge');
  if(!rows||!rows.length){podEl.innerHTML='';listEl.innerHTML=nd('No counsellor data');badgeEl.textContent='0 counsellors';$('cnamesWrap').style.display='none';return;}
  const map={};
  rows.forEach(r=>{
    let raw=(r.counsellor||'').trim();
    if(!raw||raw.toLowerCase()==='none')return;
    const key=raw.split(' ').map(w=>w.charAt(0).toUpperCase()+w.slice(1).toLowerCase()).join(' ');
    map[key]=(map[key]||0)+1;
  });
  allCounselData=Object.entries(map).map(([name,count])=>({name,count})).sort((a,b)=>b.count-a.count);
  if(!allCounselData.length){podEl.innerHTML='';listEl.innerHTML=nd('No counsellor data');badgeEl.textContent='0 counsellors';$('cnamesWrap').style.display='none';return;}
  badgeEl.textContent=allCounselData.length+' counsellors';
  const icons=['ð¥','ð¥','ð¥'],cls=['p1','p2','p3'],lbls=['Top Performer','2nd Place','3rd Place'];
  podEl.innerHTML=allCounselData.slice(0,3).map((c,i)=>'<div class="c-pod '+cls[i]+'"><span class="c-pod-ico">'+icons[i]+'</span><div class="c-pod-body"><span class="c-pod-name" title="'+c.name+'">'+c.name+'</span><span class="c-pod-lbl">'+lbls[i]+'</span></div><span class="c-pod-num">'+c.count+'</span></div>').join('');
  renderCounselList(allCounselData);
  renderCounselNames(allCounselData);
  const ts=new Date().toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});
  const t5=$('t5');if(t5)t5.textContent='Updated '+ts;
}

function renderCounselList(data){
  const total=data.reduce((a,b)=>a+b.count,0),max=data[0]?data[0].count:1;
  const filtered=cSearchVal?data.filter(c=>c.name.toLowerCase().includes(cSearchVal)):data;
  if(!filtered.length){$('cList').innerHTML=nd('No match for "'+cSearchVal+'"');return;}
  $('cList').innerHTML=filtered.map(c=>{
    const ci=data.indexOf(c),col=CCOLORS[ci%CCOLORS.length],dot=CDOTS[ci%CDOTS.length];
    const parts=c.name.split(' '),init=parts.length>1?parts[0][0]+parts[1][0]:c.name.slice(0,2);
    const pct=Math.round((c.count/total)*100);
    return'<div class="c-row"><div class="c-rank">'+( ci+1)+'</div><div class="c-avatar" style="background:'+col+'">'+init.toUpperCase()+'</div><div class="c-info"><span class="c-name" title="'+c.name+'">'+c.name+'</span><div class="c-bar-bg"><div class="c-bar-fill" id="cb'+ci+'" style="background:'+dot+'"></div></div></div><div class="c-right"><span class="c-count">'+c.count+'</span><span class="c-pct">'+pct+'%</span></div></div>';
  }).join('');
  requestAnimationFrame(()=>requestAnimationFrame(()=>{filtered.forEach(c=>{const ci=data.indexOf(c);const el=$('cb'+ci);if(el)el.style.transform='scaleX('+( c.count/max)+')';});}));
}

function renderCounselNames(data){
  const wrap=$('cnamesWrap'),grid=$('cnamesGrid'),title=$('cnamesTitle');
  if(!data.length){wrap.style.display='none';return;}
  wrap.style.display='block';
  title.textContent='All '+data.length+' Counsellors';
  const total=data.reduce((a,b)=>a+b.count,0);
  grid.innerHTML=data.map((c,i)=>{
    const dot=CDOTS[i%CDOTS.length];
    const pct=Math.round((c.count/total)*100);
    return'<div class="cn-chip"><div class="cn-dot" style="background:'+dot+'"></div><span class="cn-name" title="'+c.name+'">'+c.name+'</span><div class="cn-stats"><span class="cn-count">'+c.count+'</span><span class="cn-pct">'+pct+'%</span></div></div>';
  }).join('');
}

$('cnamesToggle').addEventListener('click',()=>{
  cnamesVisible=!cnamesVisible;
  $('cnamesGrid').style.display=cnamesVisible?'grid':'none';
  $('cnamesToggle').querySelector('svg').style.transform=cnamesVisible?'':' rotate(180deg)';
  $('cnamesToggleTxt').textContent=cnamesVisible?'Hide List':'Show List';
});

/* DONUT + MANAGER FILTER */
function updateDonut(d,trendRows){
  let univVals={};
  if(activeMgr&&trendRows.length){
    const mgrName=MGRS.find(m=>m.k===activeMgr)?.n||'';
    trendRows.forEach(r=>{
      const rMgr=(r.mgr||'').trim().toLowerCase();
      if(rMgr!==mgrName.toLowerCase())return;
      const rUniv=(r.univ||'').trim().toLowerCase();
      if(!rUniv)return;
      const matched=UNIVS.find(u=>rUniv.includes(u.n.toLowerCase())||u.n.toLowerCase().includes(rUniv));
      const key=matched?matched.k:'others';
      univVals[key]=(univVals[key]||0)+1;
    });
    if(Object.values(univVals).reduce((a,b)=>a+b,0)===0){
      const mgrTotal=d[activeMgr]||0,totalNet=d.netAdm||1,ratio=mgrTotal/totalNet;
      UNIVS.forEach(u=>{univVals[u.k]=Math.round((d[u.k]||0)*ratio);});
    }
  } else {UNIVS.forEach(u=>{univVals[u.k]=d[u.k]||0;});}
  const total=Object.values(univVals).reduce((a,b)=>a+b,0);
  $('unum').textContent=total;
  $('uSub').textContent=activeMgr?MGRS.find(m=>m.k===activeMgr)?.n+' ADM':'NET ADM';
  let off=0;
  UNIVS.forEach((u,i)=>{const v=univVals[u.k]||0,arc=total>0?(v/total)*C:0;const s=$('u'+(i+1));s.setAttribute('stroke',u.cl);s.setAttribute('stroke-dasharray',arc+' '+C);s.setAttribute('stroke-dashoffset',-off);off+=arc;});
  $('uleg').innerHTML=UNIVS.map(u=>'<div class="leg-row"><div class="leg-l"><div class="leg-dot" style="background:'+u.cl+'"></div><span class="leg-name">'+u.n+'</span></div><span class="leg-val">'+( univVals[u.k]||0)+'</span></div>').join('');
  $('ub-b').innerHTML=(activeMgr?MGRS.find(m=>m.k===activeMgr)?.n+' &middot; ':'')+UNIVS.filter(u=>(univVals[u.k]||0)>0).length+' UNIVS';
}

function toggleMgrFilter(mgrKey,mgrName,trendRows){
  const ck=customFrom?'cr_'+customFrom+'_'+customTo:period;
  const d=mem[ck]?.data;if(!d)return;
  if(activeMgr===mgrKey){activeMgr=null;$('univFilterTag').classList.remove('show');}
  else{activeMgr=mgrKey;$('univFilterName').textContent=mgrName;$('univFilterTag').classList.add('show');}
  syncMgrBarStates();updateDonut(d,trendRows);
}
function syncMgrBarStates(){
  MGRS.forEach((m,i)=>{
    const row=$('mbr'+i);if(!row)return;
    if(!activeMgr){row.classList.remove('active-mgr','dimmed');}
    else if(m.k===activeMgr){row.classList.add('active-mgr');row.classList.remove('dimmed');}
    else{row.classList.add('dimmed');row.classList.remove('active-mgr');}
  });
}

/* TABS */
document.querySelectorAll('.tab').forEach(t=>t.addEventListener('click',()=>{
  if(t.classList.contains('on'))return;
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('on'));
  t.classList.add('on');clearRange();load(t.getAttribute('data-p'));
}));

/* CALENDAR */
let calY=new Date().getFullYear(),calM=new Date().getMonth(),rStart=null,rEnd=null,hoverDt=null;
function fmtDisp(d){return d?d.getDate()+' '+MONTHS[d.getMonth()].slice(0,3)+' '+d.getFullYear():'â';}
function fmtISO(d){return d.getFullYear()+'-'+String(d.getMonth()+1).padStart(2,'0')+'-'+String(d.getDate()).padStart(2,'0');}
function sameDay(a,b){return a&&b&&a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate();}
function dayTs(d){return d?new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime():0;}

function buildCal(){
  $('calMonthLbl').textContent=MONTHS[calM]+' '+calY;
  const dow=$('calDow');
  if(!dow.childElementCount)DOWS.forEach(l=>{const e=document.createElement('div');e.className='cal-dow';e.textContent=l;dow.appendChild(e);});
  const grid=$('calDays');grid.innerHTML='';
  const today=new Date();today.setHours(0,0,0,0);
  const firstDow=new Date(calY,calM,1).getDay(),totalDays=new Date(calY,calM+1,0).getDate();
  for(let i=0;i<firstDow;i++){const e=document.createElement('div');e.className='cal-day empty';grid.appendChild(e);}
  for(let d=1;d<=totalDays;d++){
    const el=document.createElement('div');el.className='cal-day';el.textContent=d;
    el.dataset.ts=dayTs(new Date(calY,calM,d));
    if(sameDay(new Date(calY,calM,d),today))el.classList.add('today');
    el.addEventListener('click',()=>{if(!rStart||rEnd){rStart=new Date(calY,calM,d);rEnd=null;hoverDt=null;}else{const s=new Date(calY,calM,d);if(dayTs(s)<dayTs(rStart)){rEnd=new Date(rStart);rStart=s;}else rEnd=s;hoverDt=null;}paintCal();});
    el.addEventListener('mouseenter',()=>{if(rStart&&!rEnd){hoverDt=new Date(calY,calM,d);paintCal();}});
    grid.appendChild(el);
  }
  grid.addEventListener('mouseleave',()=>{if(rStart&&!rEnd){hoverDt=null;paintCal();}});
  paintCal();
}
function paintCal(){
  const prev=rEnd||(rStart&&hoverDt?hoverDt:null);
  let loTs=0,hiTs=0;
  if(rStart&&prev){const st=dayTs(rStart),et=dayTs(prev);loTs=Math.min(st,et);hiTs=Math.max(st,et);}
  else if(rStart){loTs=hiTs=dayTs(rStart);}
  $('calDays').querySelectorAll('.cal-day:not(.empty)').forEach(el=>{
    const ts=+el.dataset.ts;
    el.classList.remove('range-start','range-end','in-range');
    if(ts===loTs)el.classList.add('range-start');
    if(ts===hiTs)el.classList.add('range-end');
    if(ts>loTs&&ts<hiTs)el.classList.add('in-range');
  });
  $('rdFrom').textContent=fmtDisp(rStart);
  $('rdTo').textContent=fmtDisp(rEnd||(hoverDt&&rStart?hoverDt:null));
  $('btnApply').disabled=!(rStart&&rEnd);
}
$('prevMo').addEventListener('click',()=>{calM--;if(calM<0){calM=11;calY--;}buildCal();});
$('nextMo').addEventListener('click',()=>{calM++;if(calM>11){calM=0;calY++;}buildCal();});
document.querySelectorAll('.preset').forEach(p=>p.addEventListener('click',()=>{
  document.querySelectorAll('.preset').forEach(x=>x.classList.remove('sel'));p.classList.add('sel');
  const n=new Date();n.setHours(0,0,0,0);const key=p.dataset.preset;let s=null,e=null;
  if(key==='today'){s=new Date(n);e=new Date(n);}
  else if(key==='yesterday'){s=new Date(n);s.setDate(s.getDate()-1);e=new Date(s);}
  else if(key==='last7'){s=new Date(n);s.setDate(s.getDate()-6);e=new Date(n);}
  else if(key==='last30'){s=new Date(n);s.setDate(s.getDate()-29);e=new Date(n);}
  else if(key==='thismonth'){s=new Date(n.getFullYear(),n.getMonth(),1);e=new Date(n);}
  else if(key==='lastmonth'){s=new Date(n.getFullYear(),n.getMonth()-1,1);e=new Date(n.getFullYear(),n.getMonth(),0);}
  else if(key==='thisyear'){s=new Date(n.getFullYear(),0,1);e=new Date(n);}
  else{rStart=null;rEnd=null;hoverDt=null;buildCal();return;}
  rStart=s;rEnd=e;hoverDt=null;calY=s.getFullYear();calM=s.getMonth();buildCal();
}));
function openCal(){$('calPanel').classList.add('open');$('calOverlay').classList.add('open');$('calBtn').classList.add('active');buildCal();}
function closeCal(){$('calPanel').classList.remove('open');$('calOverlay').classList.remove('open');}
$('calBtn').addEventListener('click',openCal);
$('calClose').addEventListener('click',closeCal);
$('calOverlay').addEventListener('click',closeCal);
$('univFilterX').addEventListener('click',()=>{
  const ck=customFrom?'cr_'+customFrom+'_'+customTo:period;
  const d=mem[ck]?.data;if(!d)return;
  activeMgr=null;syncMgrBarStates();$('univFilterTag').classList.remove('show');updateDonut(d,lastTrendRows);
});
$('btnApply').addEventListener('click',()=>{
  if(!rStart||!rEnd)return;
  customFrom=fmtISO(rStart);customTo=fmtISO(rEnd);
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('on'));
  $('calBtn').classList.add('active');$('rangeBadge').classList.add('show');
  $('rangeBadgeTxt').textContent=fmtDisp(rStart)+' â '+fmtDisp(rEnd);
  closeCal();load('custom',true,customFrom,customTo);
});
$('btnClear').addEventListener('click',()=>{rStart=null;rEnd=null;hoverDt=null;document.querySelectorAll('.preset').forEach(x=>x.classList.remove('sel'));buildCal();});
function clearRange(){customFrom=null;customTo=null;rStart=null;rEnd=null;hoverDt=null;$('rangeBadge').classList.remove('show');$('calBtn').classList.remove('active');}
$('rangeBadgeX').addEventListener('click',()=>{clearRange();document.querySelector('[data-p="all"]').classList.add('on');load('all');});

/* BOOT */
(function boot(){
  const dk=dkRead('all');
  if(dk){mem['all']={data:dk.data,ts:dk.ts};render(dk.data,true);show();}
  load('all');
  setTimeout(prefetchAll,dk?2500:600);
})();
</script>
</body>
</html>
